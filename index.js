var M=Object.defineProperty,x=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var k=(n,t,r)=>t in n?M(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,o=(n,t)=>{for(var r in t||(t={}))O.call(t,r)&&k(n,r,t[r]);if(p)for(var r of p(t))_.call(t,r)&&k(n,r,t[r]);return n},m=(n,t)=>x(n,P(t));(function(){"use strict";function n(s){const e=window.panel.plugins.thirdParty;if(e.__nodesInitialized)return;const i=e.nodes;if(!i)return;const l=s.component("k-writer");s.component("k-writer",{extends:l,methods:{createNodes(){const d=l.options.methods.createNodes.call(this).filter(({name:a})=>!Object.keys(i).includes(a)),u=Object.entries(i).reduce((a,[c,g])=>(a[c]=new g,a),{});return[...d,...this.filterExtensions(u,this.nodes)]}}}),e.__nodesInitialized=!0}function t(s){const e=window.panel.plugins.thirdParty;if(e.__marksInitialized)return;const i=e.marks;if(!i)return;const l=s.component("k-writer");s.component("k-writer",{extends:l,methods:{createMarks(){const d=l.options.methods.createMarks.call(this).filter(({name:a})=>!Object.keys(i).includes(a)),u=Object.entries(i).reduce((a,[c,g])=>(a[c]=new g,a),{});return[...d,...this.filterExtensions(u,this.marks)]}}}),e.__marksInitialized=!0}class r{constructor(e={}){this.options=o(o({},this.defaults),e)}init(){return null}bindEditor(e=null){this.editor=e}get name(){return null}get type(){return"extension"}get defaults(){return{}}plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class h extends r{constructor(e={}){super(e)}get type(){return"node"}get schema(){return null}commands(){return{}}}class w extends h{get button(){return{id:this.name,icon:"headline",label:window.panel.$t("coralic.extendedWriter.nodes.heading"),name:this.name}}commands({utils:e,type:i}){return{blockHeading:()=>e.setBlockType(i)}}get name(){return"blockHeading"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"h2"}],toDOM:()=>["h2",0]}}}class b extends h{get button(){return{id:this.name,icon:"quote",label:window.panel.$t("coralic.extendedWriter.nodes.greatPrimer"),name:this.name}}commands({utils:e,type:i}){return{greatPrimer:()=>e.setBlockType(i)}}get name(){return"greatPrimer"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"div",getAttrs:()=>({class:"great-primer"})}],toDOM:()=>["div",{class:"great-primer"},0]}}}class f extends r{constructor(e={}){super(e)}command(){return()=>{}}remove(){this.editor.removeMark(this.name)}get schema(){return null}get type(){return"mark"}toggle(){return this.editor.toggleMark(this.name)}update(e){this.editor.updateMark(this.name,e)}}class y extends f{get button(){return{icon:"star",label:window.panel.$t("coralic.extendedWriter.nodes.highlight")}}commands(){return()=>this.toggle()}get name(){return"highlight"}get schema(){return{parseDOM:[{tag:"mark"}],toDOM:e=>["mark",o({},e.attrs),0]}}}window.panel.plugin("coralic/frohberger-writer-nodes",{use:[n,t],thirdParty:{nodes:m(o({},window.panel.plugins.thirdParty.nodes||{}),{blockHeading:w,greatPrimer:b}),marks:m(o({},window.panel.plugins.thirdParty.marks||{}),{highlight:y})}})})();
